{"ast":null,"code":"import Firebase from '../config/Firebase';\nexport const UPDATE_TESTIMONIES = \"UPDATE_TESTIMONIES\";\nexport const TOGGLE_TESTIMONY_LOADING = \"TOGGLE_TESTIMONY_LOADING\";\nexport const getTestimonies = () => {\n  return dispatch => {\n    Firebase.firestore().collection('testimonies').limit(20).get().then(snap => {\n      var arr = [];\n      snap.docs.map(doc => {\n        arr.push(doc.data());\n      });\n      dispatch(updateTestimonies(arr));\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n};\nexport const toggleTestimony = () => {\n  return dispatch => {\n    dispatch(toggleTestimonyLoading());\n  };\n};\nexport const insertTestimony = testimony => {\n  return (dispatch, getState) => {\n    Firebase.firestore().collection('testimonies').set({}).then(() => {\n      console.log('documnet successfully written');\n    }).catch(err => {\n      console.log(\"There was an error: \", err);\n    });\n  };\n};\nexport const deleteTestimony = testId => {\n  return (dispatch, getState) => {\n    const testimoniesLength = getState().testimonies.testimonies.length;\n\n    if (testimoniesLength <= 1) {\n      Firebase.firestore().collection('testimonies').delete().then(() => {\n        console.log(\"Collection deleted!\");\n        dispatch(updateTestimonies([]));\n      }).catch(err => {\n        console.log(\"There was an error\", err);\n      });\n    } else {\n      Firebase.firestore().collection('testimonies').doc(testId).delete().then(() => {\n        console.log('Documnet Sucessfully Deleted');\n        const testimonies = getState().testimonies.testimonies;\n        var newTest = [];\n        testimonies.map(t => {\n          if (t._id != testId) {\n            newTest.push(t);\n          }\n        });\n        dispatch(updateTestimonies(newTest));\n      }).catch(err => {\n        console.log(\"There was an error\", err);\n      });\n    }\n  };\n};\n\nconst updateTestimonies = testimonies => ({\n  type: UPDATE_TESTIMONIES,\n  testimonies\n});\n\nconst toggleTestimonyLoading = () => ({\n  type: TOGGLE_TESTIMONY_LOADING\n});","map":{"version":3,"sources":["/Users/philippmourasrivastava/Dev/Foxdale/src/app/actions/testimonies.js"],"names":["Firebase","UPDATE_TESTIMONIES","TOGGLE_TESTIMONY_LOADING","getTestimonies","dispatch","firestore","collection","limit","get","then","snap","arr","docs","map","doc","push","data","updateTestimonies","catch","err","console","log","toggleTestimony","toggleTestimonyLoading","insertTestimony","testimony","getState","set","deleteTestimony","testId","testimoniesLength","testimonies","length","delete","newTest","t","_id","type"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,oBAArB;AAEA,OAAO,MAAMC,kBAAkB,GAAG,oBAA3B;AACP,OAAO,MAAMC,wBAAwB,GAAG,0BAAjC;AAEP,OAAO,MAAMC,cAAc,GAAG,MAAM;AAGlC,SAAQC,QAAD,IAAc;AAEnBJ,IAAAA,QAAQ,CAACK,SAAT,GAAqBC,UAArB,CAAgC,aAAhC,EAA+CC,KAA/C,CAAqD,EAArD,EAAyDC,GAAzD,GAA+DC,IAA/D,CAAqEC,IAAD,IAAU;AAC5E,UAAIC,GAAG,GAAG,EAAV;AAEAD,MAAAA,IAAI,CAACE,IAAL,CAAUC,GAAV,CAAeC,GAAD,IAAS;AAErBH,QAAAA,GAAG,CAACI,IAAJ,CAASD,GAAG,CAACE,IAAJ,EAAT;AACD,OAHD;AAIAZ,MAAAA,QAAQ,CAACa,iBAAiB,CAACN,GAAD,CAAlB,CAAR;AACD,KARD,EAQGO,KARH,CAQUC,GAAD,IAAS;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,KAVD;AAYD,GAdD;AAgBD,CAnBM;AAqBP,OAAO,MAAMG,eAAe,GAAG,MAAM;AAEnC,SAAQlB,QAAD,IAAc;AACnBA,IAAAA,QAAQ,CAACmB,sBAAsB,EAAvB,CAAR;AACD,GAFD;AAGD,CALM;AAOP,OAAO,MAAMC,eAAe,GAAGC,SAAS,IAAI;AAE1C,SAAO,CAACrB,QAAD,EAAWsB,QAAX,KAAwB;AAE7B1B,IAAAA,QAAQ,CAACK,SAAT,GAAqBC,UAArB,CAAgC,aAAhC,EAA+CqB,GAA/C,CAAmD,EAAnD,EAEGlB,IAFH,CAEQ,MAAM;AACZW,MAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACD,KAJD,EAIGH,KAJH,CAIUC,GAAD,IAAS;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCF,GAApC;AACD,KAND;AAQD,GAVD;AAWD,CAbM;AAeP,OAAO,MAAMS,eAAe,GAAGC,MAAM,IAAI;AAEvC,SAAO,CAACzB,QAAD,EAAWsB,QAAX,KAAwB;AAE7B,UAAMI,iBAAiB,GAAGJ,QAAQ,GAAGK,WAAX,CAAuBA,WAAvB,CAAmCC,MAA7D;;AAEA,QAAGF,iBAAiB,IAAI,CAAxB,EAA2B;AACzB9B,MAAAA,QAAQ,CAACK,SAAT,GAAqBC,UAArB,CAAgC,aAAhC,EAA+C2B,MAA/C,GAAwDxB,IAAxD,CAA6D,MAAM;AACjEW,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAjB,QAAAA,QAAQ,CAACa,iBAAiB,CAAC,EAAD,CAAlB,CAAR;AACD,OAHD,EAGGC,KAHH,CAGUC,GAAD,IAAS;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC;AACD,OALD;AAMD,KAPD,MAQK;AACHnB,MAAAA,QAAQ,CAACK,SAAT,GAAqBC,UAArB,CAAgC,aAAhC,EAA+CQ,GAA/C,CAAmDe,MAAnD,EAA2DI,MAA3D,GAAoExB,IAApE,CAAyE,MAAM;AAC7EW,QAAAA,OAAO,CAACC,GAAR,CAAY,8BAAZ;AACA,cAAMU,WAAW,GAAGL,QAAQ,GAAGK,WAAX,CAAuBA,WAA3C;AAEA,YAAIG,OAAO,GAAG,EAAd;AAEAH,QAAAA,WAAW,CAAClB,GAAZ,CAAiBsB,CAAD,IAAO;AACrB,cAAGA,CAAC,CAACC,GAAF,IAASP,MAAZ,EAAoB;AAClBK,YAAAA,OAAO,CAACnB,IAAR,CAAaoB,CAAb;AACD;AACF,SAJD;AAMA/B,QAAAA,QAAQ,CAACa,iBAAiB,CAACiB,OAAD,CAAlB,CAAR;AACD,OAbD,EAaGhB,KAbH,CAaUC,GAAD,IAAS;AAChBC,QAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCF,GAAlC;AACD,OAfD;AAgBD;AAGF,GAhCD;AAiCD,CAnCM;;AAsCP,MAAMF,iBAAiB,GAAGc,WAAW,KAAK;AACxCM,EAAAA,IAAI,EAAEpC,kBADkC;AAExC8B,EAAAA;AAFwC,CAAL,CAArC;;AAKA,MAAMR,sBAAsB,GAAG,OAAO;AACpCc,EAAAA,IAAI,EAAEnC;AAD8B,CAAP,CAA/B","sourcesContent":["import Firebase from '../config/Firebase'\n\nexport const UPDATE_TESTIMONIES = \"UPDATE_TESTIMONIES\";\nexport const TOGGLE_TESTIMONY_LOADING = \"TOGGLE_TESTIMONY_LOADING\";\n\nexport const getTestimonies = () => {\n\n\n  return (dispatch) => {\n\n    Firebase.firestore().collection('testimonies').limit(20).get().then((snap) => {\n      var arr = []\n\n      snap.docs.map((doc) => {\n\n        arr.push(doc.data())\n      })\n      dispatch(updateTestimonies(arr))\n    }).catch((err) => {\n      console.log(err)\n    })\n\n  }\n\n}\n\nexport const toggleTestimony = () => {\n\n  return (dispatch) => {\n    dispatch(toggleTestimonyLoading())\n  }\n}\n\nexport const insertTestimony = testimony => {\n\n  return (dispatch, getState) => {\n\n    Firebase.firestore().collection('testimonies').set({\n\n    }).then(() => {\n      console.log('documnet successfully written');\n    }).catch((err) => {\n      console.log(\"There was an error: \", err);\n    })\n\n  }\n}\n\nexport const deleteTestimony = testId => {\n\n  return (dispatch, getState) => {\n\n    const testimoniesLength = getState().testimonies.testimonies.length;\n\n    if(testimoniesLength <= 1) {\n      Firebase.firestore().collection('testimonies').delete().then(() => {\n        console.log(\"Collection deleted!\")\n        dispatch(updateTestimonies([]))\n      }).catch((err) => {\n        console.log(\"There was an error\", err)\n      })\n    }\n    else {\n      Firebase.firestore().collection('testimonies').doc(testId).delete().then(() => {\n        console.log('Documnet Sucessfully Deleted');\n        const testimonies = getState().testimonies.testimonies;\n\n        var newTest = []\n\n        testimonies.map((t) => {\n          if(t._id != testId) {\n            newTest.push(t)\n          }\n        })\n\n        dispatch(updateTestimonies(newTest))\n      }).catch((err) => {\n        console.log(\"There was an error\", err)\n      })\n    }\n\n\n  }\n}\n\n\nconst updateTestimonies = testimonies => ({\n  type: UPDATE_TESTIMONIES,\n  testimonies\n})\n\nconst toggleTestimonyLoading = () => ({\n  type: TOGGLE_TESTIMONY_LOADING\n})\n"]},"metadata":{},"sourceType":"module"}